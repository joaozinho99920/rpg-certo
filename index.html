<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>RPG Certo</title>
  <style>
    body {
      font-family: monospace, sans-serif;
      background: linear-gradient(135deg, #1c1c1c, #333);
      color: #f5f5f5;
      text-align: center;
      margin: 0;
      padding: 0;
    }
    #game, #menu { display: none; }
    .btn {
      background: #444;
      color: white;
      border: none;
      padding: 10px 20px;
      margin: 5px;
      cursor: pointer;
      border-radius: 5px;
    }
    .btn:hover { background: #666; }
    pre {
      text-align: left;
      background: #222;
      padding: 10px;
      max-height: 300px;
      overflow-y: auto;
      border-radius: 5px;
    }
  </style>
</head>
<body>
  <h1>‚öîÔ∏è RPG Certo ‚öîÔ∏è</h1>
  <div id="start">
    <button class="btn" onclick="novoJogo()">Novo Jogo</button>
    <button class="btn" onclick="carregarJogo()">Carregar Jogo</button>
  </div>

  <div id="menu">
    <h2 id="status"></h2>
    <button class="btn" onclick="explorar()">Explorar</button>
    <button class="btn" onclick="viajar()">Viajar</button>
    <button class="btn" onclick="ferreiro()">Ferreiro</button>
    <button class="btn" onclick="mostrarInventario()">Invent√°rio</button>
    <button class="btn" onclick="mostrarStatus()">Status</button>
    <button class="btn" onclick="equiparItem()">Equipar Item</button>
    <button class="btn" onclick="salvar()">Salvar</button>
    <button class="btn" onclick="resgatarCodigo()">Resgatar C√≥digo</button>
    <button class="btn" onclick="sair()">Sair</button>
    <pre id="log"></pre>
  </div>

<script>
class Player {
  constructor(nome, classe, hp, mp, atk) {
    this.nome = nome;
    this.classe = classe;
    this.max_hp = hp;
    this.hp = hp;
    this.max_mp = mp;
    this.mp = mp;
    this.atk = atk;
    this.exp = 0;
    this.lvl = 1;
    this.gold = 0;
    this.inventario = [];
    this.arma = null;
    this.armadura = null;
    this.acessorio = null;
    this.defesa = 0;
    this.bioma = "Floresta";
  }
  addItem(item) {
    this.inventario.push(item);
    log(`üéÅ Voc√™ recebeu: ${item.nome} (${item.raridade})`);
  }
  heal() {
    if (this.mp >= 10) {
      let cura = rand(20,50);
      this.hp = Math.min(this.max_hp, this.hp + cura);
      this.mp -= 10;
      log(`üç∑ ${this.nome} recuperou ${cura} HP!`);
    } else log("‚ö†Ô∏è MP insuficiente!");
  }
  attack(enemy) {
    let dano = rand(this.atk-2,this.atk+5);
    dano -= enemy.defesa || 0;
    dano = Math.max(1,dano);
    enemy.hp -= dano;
    log(`‚öîÔ∏è ${this.nome} causou ${dano} em ${enemy.name}`);
  }
  ganharExp(qtd) {
    this.exp += qtd;
    if (this.exp >= this.lvl*100) {
      this.lvl++;
      this.max_hp += 20;
      this.atk += 5;
      this.hp = this.max_hp;
      log(`‚≠ê ${this.nome} subiu para o n√≠vel ${this.lvl}!`);
    }
  }
}

class Enemy {
  constructor(name,hp,atk,gold,exp,boss=false,drops=[]) {
    this.name=name;this.hp=hp;this.atk=atk;this.gold=gold;
    this.exp=exp;this.boss=boss;this.drops=drops;
  }
  attack(player){
    let dano = rand(this.atk-3,this.atk+5);
    dano = Math.max(1,dano - player.defesa);
    player.hp -= dano;
    log(`üí¢ ${this.name} causou ${dano} em ${player.nome}`);
  }
}

let player=null;

function novoJogo(){
  let nome = prompt("Digite o nome do seu her√≥i:");
  let esc = prompt("Escolha classe:\n1.Guerreiro (HP120/MP30/ATK15)\n2.Mago (HP80/MP80/ATK10)\n3.Arqueiro (HP100/MP50/ATK12)");
  if(esc==="1") player=new Player(nome,"Guerreiro",120,30,15);
  else if(esc==="2") player=new Player(nome,"Mago",80,80,10);
  else if(esc==="3") player=new Player(nome,"Arqueiro",100,50,12);
  else player=new Player(nome,"Aventureiro",100,40,10);

  document.getElementById("start").style.display="none";
  document.getElementById("menu").style.display="block";
  atualizarStatus();
}

function carregarJogo(){
  let save=localStorage.getItem("save");
  if(save){
    player=Object.assign(new Player(),JSON.parse(save));
    log("üíæ Jogo carregado com sucesso!");
    document.getElementById("start").style.display="none";
    document.getElementById("menu").style.display="block";
    atualizarStatus();
  } else {
    log("‚ö†Ô∏è Nenhum save encontrado!");
  }
}

function viajar(){
  let biomas=["Floresta","Deserto","Gelo","Lava"];
  let esc = prompt("Escolha o bioma:\n1.Floresta üå≥\n2.Deserto üèúÔ∏è\n3.Gelo ‚ùÑÔ∏è\n4.Lava üåã");
  player.bioma = biomas[parseInt(esc)-1] || "Floresta";
  log(`üß≠ Voc√™ viajou para o bioma ${player.bioma}!`);
}

function explorar(){
  let inimigosPorBioma = {
    "Floresta":[
      new Enemy("Slime",30,5,10,20),
      new Enemy("Goblin",50,8,20,30)
    ],
    "Deserto":[
      new Enemy("Escorpi√£o",40,10,15,25),
      new Enemy("M√∫mia",70,12,30,40)
    ],
    "Gelo":[
      new Enemy("Lobo de Gelo",60,11,25,35),
      new Enemy("Yeti",90,14,50,50)
    ],
    "Lava":[
      new Enemy("Golem de Fogo",100,15,60,60),
      new Enemy("Drag√£o de Magma",150,20,100,100,true)
    ]
  };
  let lista = inimigosPorBioma[player.bioma] || inimigosPorBioma["Floresta"];
  let e=lista[rand(0,lista.length-1)];
  batalha(e);
}

function batalha(enemy){
  log(`üî• ${enemy.name} apareceu!`);
  while(player.hp>0 && enemy.hp>0){
    let acao=prompt(`${player.nome} HP:${player.hp}/${player.max_hp} | ${enemy.name} HP:${enemy.hp}\n1.Atacar 2.Curar`);
    if(acao==="1") player.attack(enemy);
    else if(acao==="2") player.heal();
    if(enemy.hp>0) enemy.attack(player);
  }
  if(player.hp>0){
    log(`‚úÖ Derrotou ${enemy.name}`);
    player.gold+=enemy.gold;
    player.ganharExp(enemy.exp);
  }else log("üíÄ Voc√™ foi derrotado...");
  atualizarStatus();
}

function mostrarInventario(){
  if(!player.inventario.length){log("üì¶ Invent√°rio vazio.");return;}
  log("üéí Invent√°rio:");
  player.inventario.forEach((i,n)=>log(`${n+1}. ${i.nome} (${i.raridade}) - ${i.tipo}`));
}

function mostrarStatus(){
  log(`üìä ${player.nome} | Classe:${player.classe} | Lvl:${player.lvl}\nHP:${player.hp}/${player.max_hp} MP:${player.mp}/${player.max_mp}\nATK:${player.atk} DEF:${player.defesa}\nGold:${player.gold} EXP:${player.exp}/${player.lvl*100}\nüåç Bioma: ${player.bioma}`);
}

function equiparItem(){
  if(!player.inventario.length){log("üì¶ Invent√°rio vazio.");return;}
  let escolha=prompt("Digite n√∫mero do item:");
  let idx=parseInt(escolha)-1;
  if(idx>=0 && idx<player.inventario.length){
    let item=player.inventario[idx];
    if(item.tipo==="arma"){player.arma=item;player.atk+=item.atk;}
    else if(item.tipo==="armadura"){player.armadura=item;player.defesa+=item.defesa;}
    else if(item.tipo==="acess√≥rio"){player.acessorio=item;player.max_hp+=item.hp_bonus;}
    log(`‚úÖ Equipou ${item.nome}`);
  }
}

function ferreiro(){log("üî® Ferreiro em constru√ß√£o...");}

function salvar(){
  localStorage.setItem("save",JSON.stringify(player));
  log("üíæ Jogo salvo!");
}

function sair(){log("üëã At√© a pr√≥xima!");location.reload();}

function resgatarCodigo(){
  let c=prompt("Digite c√≥digo secreto:").toLowerCase();
  if(c==="admcode"){player.classe="ADM";player.max_hp=999;player.max_mp=999;player.atk=999;player.hp=player.max_hp;player.mp=player.max_mp;log("üëë Classe ADM Suprema!");}
  else log("‚ùå C√≥digo inv√°lido!");
}

function atualizarStatus(){
  document.getElementById("status").innerText=
    `${player.nome} (Lvl ${player.lvl}) | HP:${player.hp}/${player.max_hp} | Gold:${player.gold} | üåç ${player.bioma}`;
}

function log(txt){
  let logBox=document.getElementById("log");
  logBox.innerText+=txt+"\n";
  logBox.scrollTop=logBox.scrollHeight;
}

function rand(min,max){return Math.floor(Math.random()*(max-min+1))+min;}
</script>
</body>
</html>
